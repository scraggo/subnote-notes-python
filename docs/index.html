<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Subnotes</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="styles/style.css" media="screen" />
  <script src="dist/clipboard.min.js"></script>
  <script src="scripts/makeBlocks.js"></script>
  <!-- <script src="scripts/makeBlocksTest.js"></script> -->
</head>

<body>
  <div class="container">
    <div class="header clearfix"></div>
    <div class="jumbotron-custom">
      <h1>Subnotes</h1>
      <p class="lead">Awesome way to organize your todo list</p>
    </div>
    <div class="row">
      <div class="col-sm-6 textarea-adjust">
        <textarea id="mainTextArea" placeholder="Write or paste text here"></textarea>
        <!-- cols="40" rows="15" -->
      </div>
      <div class="col-sm-4 btn-adjust">
        <button class="btn btn-lg btn-success top-align" id="mainButton" data-clipboard-target="#mainTextArea">
        Sort and Copy to Clipboard
      </button><span id="notify" class="notify-hide">Copied!</span>
        <br>
        <button type="button" class="btn btn-lg btn-info  top-align" id="demoButton">Demo Text</button>
      </div>

    </div>
    <hr>
    By <a href="https://scraggo.github.io">scraggo.</a> See the <a href="https://github.com/scraggo/subnotes">repo on GitHub.</a>
  </div>

  <!-- <script src="chrome-extension://lkfkkhfhhdkiemehlpkgjeojomhpccnh/lib/screenlog.js"></script> -->
  <script>
    new Clipboard('#mainButton');
    console.log('Awaiting input...')
    const textArea = document.getElementById('mainTextArea');
    const mainButton = document.getElementById('mainButton');
    const demoButton = document.getElementById('demoButton');
    // console.log(textArea);
    // console.log(mainButton);
    mainButton.addEventListener('click', asdf1);
    demoButton.addEventListener('click', asdf3);

    function asdf1() {
      /*
      Main function: gets text from textarea, sorts it, writes output to html
      */
      document.getElementById("notify").className = "notify-hide";
      let textContent = textArea.value;
      // console.log(textContent);
      if (!textContent) {return;}
      let sortedArray = block_encoder(textContent).sort(abcSort);
      let sortedText = sortedOutput(sortedArray);
      let newText = sortedText.join('\n\n');
      // console.log(newText);
      textArea.value = newText;
      asdf4(10);
    }

    function abcSort(a, b) {
      if (a[0] < b[0]) return -1;
      if (a[0] > b[0]) return 1;
      return 0;
    }

    function sortedOutput(arr) {
      return arr.map(block => block.join('\n'));
    }

    function asdf4(time) {
      /*
      delays the addition of notify-show class by param:time
      */
      window.setTimeout(function () {
        document.getElementById("notify").className = "notify-show";
      }, time);
    }

    function asdf3() {
      /*
      assigns a test tring to textarea
      */
      textArea.value = `a
asdf

s
asdf

d
asdf


f
asdf
asdf

g
asdf
asdf
asdf

e

w

z

r
      `
    }
    // function asdf2() {
    //   return new Promise(function(resolve, reject) {
    //   )
    // });
    // p.then(() => {})}

    //# sourceURL=userscript.js
  </script>
</body>

</html>